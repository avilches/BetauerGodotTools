[gd_scene load_steps=19 format=2]

[ext_resource path="res://Worlds/Environment/GVaniaBridgeTileMap.tscn" type="PackedScene" id=1]
[ext_resource path="res://tools/Filler2D.gd" type="Script" id=2]
[ext_resource path="res://Scenes/WorldComplete.tscn" type="PackedScene" id=3]
[ext_resource path="res://tools/platforms/FallPlatformFollowPath.gd" type="Script" id=4]
[ext_resource path="res://Worlds/Environment/gvania-bridge-background.png" type="Texture" id=5]
[ext_resource path="res://tools/platforms/PlatformBodyOut.gd" type="Script" id=6]
[ext_resource path="res://Scenes/Player.tscn" type="PackedScene" id=7]
[ext_resource path="res://Worlds/Environment/gvania-bridge-middleground.png" type="Texture" id=8]
[ext_resource path="res://tools/DeathArea.gd" type="Script" id=9]
[ext_resource path="res://tools/platforms/FallMovingPlatform.gd" type="Script" id=10]
[ext_resource path="res://tools/platforms/FallPlatform.gd" type="Script" id=11]
[ext_resource path="res://Worlds/AnimatedPlat.gd" type="Script" id=12]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 2000, 50 )

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 24, 8 )

[sub_resource type="Curve2D" id=3]
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, -2, 2, 0, 0, 0, 0, 9, 5, 0, 0, 0, 0, 42, 8, 0, 0, 0, 0, 16, 13, 0, 0, 0, 0, 0, 15, 0, 0, 0, 0, -13, 14, 0, 0, 0, 0, -39, 7, 0, 0, 0, 0, -20, 2, 0, 0, 0, 0, -2, 2 )
}

[sub_resource type="Animation" id=4]
length = 2.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 0, 0 ), Vector2( 20, 10 ) ]
}

[sub_resource type="RectangleShape2D" id=5]
extents = Vector2( 24, 2 )

[sub_resource type="RectangleShape2D" id=6]

[node name="World1" type="Node2D"]
position = Vector2( 263, -10 )

[node name="ColorRect" type="ColorRect" parent="."]
margin_left = 987.0
margin_top = 153.0
margin_right = 2064.0
margin_bottom = 229.0
color = Color( 0, 0, 0, 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="DeathZone" type="Area2D" parent="."]
position = Vector2( -491, 224 )
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="DeathZone"]
position = Vector2( 2000, 80 )
shape = SubResource( 1 )
script = ExtResource( 9 )
color = Color( 0.862745, 0.0352941, 0.0352941, 1 )

[node name="GVaniaBridgeTileMap" parent="." instance=ExtResource( 1 )]
modulate = Color( 0.913725, 0.87451, 0.607843, 1 )
position = Vector2( 14, 0 )
tile_data = PoolIntArray( -65474, 41, 0, -65470, 42, 0, -65469, 42, 0, -65468, 42, 0, -65467, 42, 0, -65466, 42, 0, -65465, 42, 0, -65464, 74, 0, 262145, 9, 0, 262149, 8, 0, 262154, 8, 0, 262206, 45, 0, 262207, 45, 0, 262208, 47, 0, 262209, 73, 0, 262210, 73, 0, 262211, 73, 0, 262212, 73, 0, 262213, 49, 0, 262214, 73, 0, 262215, 73, 0, 262216, 73, 0, 393212, 536870941, 0, 393213, 536870941, 0, 393214, 536870944, 0, 393215, 536870941, 0, 327742, 45, 0, 327743, 45, 0, 327744, 47, 0, 327746, 49, 0, 327747, 73, 0, 327748, 73, 0, 327750, 73, 0, 327751, 73, 0, 327752, 53, 0, 458750, 536870947, 0, 393283, 73, 0, 393284, 73, 0, 393285, 73, 0, 393286, 73, 0, 393287, 73, 0, 393291, 76, 0, 393293, 94, 0, 393296, 93, 0, 393297, 95, 0, 524286, 35, 0, 458762, 12, 0, 458814, 46, 0, 458815, 46, 0, 458816, 48, 0, 458819, 50, 0, 458821, 52, 0, 458824, 54, 0, 458825, 76, 0, 589822, 35, 0, 524293, 4, 0, 524294, 4, 0, 524342, 536870932, 0, 524344, 536870932, 0, 524347, 536870932, 0, 524350, 536870932, 0, 524359, 76, 0, 655353, 1, 0, 655358, 3, 0, 589831, 3, 0, 589840, 2, 0, 589846, 1, 0, 589851, 2, 0, 589858, 1, 0, 589863, 2, 0, 589877, 1, 0, 589880, 1, 0, 589885, 3, 0, 589894, 3, 0, 589895, 80, 0, 589896, 81, 0, 589897, 82, 0, 589898, 84, 0, 589903, 2, 0, 589907, 1, 0, 589912, 3, 0, 589921, 2, 0, 589925, 1, 0, 589930, 2, 0, 589934, 1, 0, 589939, 2, 0, 655406, 26, 0, 655408, 29, 0, 655409, 29, 0, 655410, 29, 0, 655411, 31, 0, 655412, 29, 0, 655413, 29, 0, 720942, 27, 0, 720947, 33, 0, 720956, 1, 0, 720961, 2, 0, 720966, 1, 0, 720970, 3, 0, 720979, 2, 0, 720985, 1, 0, 720990, 3, 0, 720999, 2, 0, 721004, 1, 0, 721009, 3, 0, 721018, 2, 0, 851941, 11, 0, 851943, 11, 0, 851945, 11, 0, 851946, 11, 0, 851948, 11, 0, 851950, 11, 0, 851953, 11, 0, 851955, 11, 0, 851958, 11, 0, 786452, 11, 0, 786463, 11, 0, 786475, 11, 0, 786478, 28, 0, 786480, 11, 0, 786481, 39, 0, 786483, 34, 0, 786484, 39, 0, 786528, 1, 0, 786532, 2, 0, 852019, 40, 0, 852033, 1, 0, 852038, 2, 0, 852051, 1, 0, 852056, 2, 0 )

[node name="BlackBottombar" type="ColorRect" parent="GVaniaBridgeTileMap"]
margin_left = -494.0
margin_top = 224.0
margin_right = 39806.0
margin_bottom = 344.0
color = Color( 0.0666667, 0.0627451, 0.0745098, 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="FixedSky" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2( 0, 0 )

[node name="Sprite" type="Sprite" parent="ParallaxBackground/FixedSky"]
modulate = Color( 0.729412, 0.643137, 0.14902, 1 )
position = Vector2( 0, 9 )
scale = Vector2( 1.4, 1.4 )
texture = ExtResource( 5 )

[node name="BG1a" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2( 0.1, 0.1 )
motion_offset = Vector2( 0, 35 )
motion_mirroring = Vector2( 304, 0 )

[node name="Sprite" type="Sprite" parent="ParallaxBackground/BG1a"]
scale = Vector2( 0.5, 0.5 )
texture = ExtResource( 8 )

[node name="DarkGreenBar" type="ColorRect" parent="ParallaxBackground/BG1a"]
margin_left = -501.0
margin_top = 59.0
margin_right = 39999.0
margin_bottom = 333.0
color = Color( 0.12549, 0.180392, 0.207843, 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BG1B" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2( 0.1, 0.1 )
motion_offset = Vector2( 0, 35 )
motion_mirroring = Vector2( 304, 0 )

[node name="Sprite" type="Sprite" parent="ParallaxBackground/BG1B"]
scale = Vector2( 0.5, 0.5 )
texture = ExtResource( 8 )
offset = Vector2( 1216, 0 )

[node name="Player" parent="." instance=ExtResource( 7 )]
position = Vector2( 65, 142 )

[node name="Platforms" type="Node" parent="."]

[node name="FallMovSlopeFollow" type="KinematicBody2D" parent="Platforms"]
position = Vector2( 70, -8 )
collision_layer = 0
collision_mask = 2147483648
script = ExtResource( 4 )
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platforms/FallMovSlopeFollow"]
position = Vector2( 150, 1 )
shape = SubResource( 2 )
script = ExtResource( 2 )
enabled_editor = true
enabled_game = true

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Platforms/FallMovSlopeFollow"]
position = Vector2( 209, -24 )
shape = SubResource( 2 )
one_way_collision = true
script = ExtResource( 2 )
enabled_editor = true
enabled_game = true

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Platforms/FallMovSlopeFollow"]
position = Vector2( 174, -10 )
rotation = -0.785398
shape = SubResource( 2 )
one_way_collision = true
script = ExtResource( 2 )
enabled_editor = true
enabled_game = true

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Platforms/FallMovSlopeFollow"]
position = Vector2( 116, -12 )
rotation = 0.785398
shape = SubResource( 2 )
one_way_collision = true
script = ExtResource( 2 )
enabled_editor = true
enabled_game = true

[node name="Platform path" type="Path2D" parent="Platforms/FallMovSlopeFollow"]
position = Vector2( 140, -52 )
curve = SubResource( 3 )

[node name="PathFollow2D" type="PathFollow2D" parent="Platforms/FallMovSlopeFollow/Platform path"]
position = Vector2( -2, 2 )
rotation = 0.266252

[node name="FallMovAnim" type="Node2D" parent="Platforms"]
position = Vector2( 234, 23 )
__meta__ = {
"_edit_group_": true,
"_editor_description_": "Este nodo es necesario porque el animation player mueve la plataforma respecto a su padre... si queremos que se mueva en el sitio, necesita un nodo que lo aisle de la escena. Si la ponemos en la escena, el aniimationplayer movera la plataforma desde la posicion 0,0 donde esta la escena..."
}

[node name="Body" type="KinematicBody2D" parent="Platforms/FallMovAnim"]
collision_layer = 0
collision_mask = 0
script = ExtResource( 10 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Platforms/FallMovAnim/Body"]
autoplay = "up down"
"anims/up down" = SubResource( 4 )

[node name="CollisionShape2D5" type="CollisionShape2D" parent="Platforms/FallMovAnim/Body"]
shape = SubResource( 2 )
one_way_collision = true
script = ExtResource( 2 )
enabled_editor = true
enabled_game = true

[node name="Area2D" type="Area2D" parent="Platforms/FallMovAnim/Body"]
position = Vector2( 0, 1 )
input_pickable = false
collision_mask = 0
script = ExtResource( 6 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platforms/FallMovAnim/Body/Area2D"]
position = Vector2( 0, -6 )
shape = SubResource( 5 )
script = ExtResource( 2 )
color = Color( 0.764706, 0.203922, 0.203922, 1 )
enabled_editor = true
enabled_game = true

[node name="Platform1" type="KinematicBody2D" parent="Platforms"]
position = Vector2( 247, 49 )
collision_mask = 0
script = ExtResource( 11 )
__meta__ = {
"_edit_group_": true
}

[node name="Filler2D" type="CollisionShape2D" parent="Platforms/Platform1"]
scale = Vector2( 2.24, 0.434 )
shape = SubResource( 6 )
one_way_collision = true
script = ExtResource( 2 )
enabled_editor = true
enabled_game = true

[node name="Platform2" type="KinematicBody2D" parent="Platforms"]
position = Vector2( 170, 99 )
rotation = 1.40848
collision_mask = 0
motion/sync_to_physics = true
__meta__ = {
"_edit_group_": true
}

[node name="Filler2D" type="CollisionShape2D" parent="Platforms/Platform2"]
scale = Vector2( 2.24, 0.434 )
shape = SubResource( 6 )
script = ExtResource( 2 )
enabled_editor = true
enabled_game = true

[node name="Platform3" type="KinematicBody2D" parent="Platforms"]
position = Vector2( 477, 86 )
collision_mask = 0
script = ExtResource( 12 )
__meta__ = {
"_edit_group_": true
}

[node name="Filler2D" type="CollisionShape2D" parent="Platforms/Platform3"]
scale = Vector2( 2.24, 0.434 )
shape = SubResource( 6 )
one_way_collision = true
script = ExtResource( 2 )
enabled_editor = true
enabled_game = true

[node name="WorldComplete" parent="." instance=ExtResource( 3 )]
position = Vector2( 115, 42 )
next_scene = "res://Worlds/World2.tscn"

[node name="TileMap" type="TileMap" parent="."]
format = 1
